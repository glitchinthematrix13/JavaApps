<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaApps | Repository Directory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .file-card:hover .screenshot-overlay { opacity: 1; }
        .screenshot-container { aspect-ratio: 16 / 10; overflow: hidden; background: #1a1a1a; }
        .screenshot-img { transition: transform 0.5s ease; }
        .file-card:hover .screenshot-img { transform: scale(1.05); }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">

    <div class="max-w-6xl mx-auto p-6 md:p-12">
        <header class="mb-12 border-b border-slate-700 pb-8 flex justify-between items-end">
            <div>
                <h1 class="text-4xl font-extrabold text-white tracking-tight">JavaApps</h1>
                <p class="text-slate-400 mt-2 font-mono">glitchinthematrix13.github.io/JavaApps</p>
            </div>
            <button onclick="fetchFiles()" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-bold transition">
                REFRESH DIRECTORY
            </button>
        </header>

        <div id="loader" class="text-center py-20">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
            <p class="mt-4 text-slate-400">Scanning repository...</p>
        </div>

        <div id="file-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
    </div>

    <script>
        const config = {
            owner: 'glitchinthematrix13',
            repo: 'JavaApps',
            branch: 'main'
        };

        async function fetchFiles() {
            const grid = document.getElementById('file-grid');
            const loader = document.getElementById('loader');
            
            grid.innerHTML = '';
            loader.classList.remove('hidden');

            try {
                const response = await fetch(`https://api.github.com/repos/${config.owner}/${config.repo}/contents/`);
                const files = await response.json();

                loader.classList.add('hidden');

                // Filter for HTML files or files likely to be apps
                const displayFiles = files.filter(file => 
                    file.name.endsWith('.html') && file.name !== 'index.html'
                );

                if (displayFiles.length === 0) {
                    grid.innerHTML = `<p class="col-span-full text-center text-slate-500">No application files found in root directory.</p>`;
                    return;
                }

                displayFiles.forEach(file => {
                    const liveUrl = `https://${config.owner}.github.io/${config.repo}/${file.name}`;
                    const githubUrl = file.html_url;
                    
                    // Using a free screenshot API (this one uses a placeholder if the site isn't indexed yet)
                    const screenshotUrl = `https://s0.wp.com/mshots/v1/${encodeURIComponent(liveUrl)}?w=600`;

                    const card = document.createElement('div');
                    card.className = 'file-card bg-slate-800 rounded-xl border border-slate-700 overflow-hidden shadow-2xl flex flex-col';
                    
                    card.innerHTML = `
                        <div class="screenshot-container relative group">
                            <img src="${screenshotUrl}" alt="${file.name}" class="screenshot-img w-full h-full object-cover" loading="lazy">
                            <div class="screenshot-overlay opacity-0 absolute inset-0 bg-blue-600/20 flex items-center justify-center transition-opacity">
                                <a href="${liveUrl}" target="_blank" class="bg-white text-slate-900 px-4 py-2 rounded-full font-bold text-sm shadow-lg">LAUNCH APP</a>
                            </div>
                        </div>
                        <div class="p-5 flex-grow">
                            <h3 class="text-lg font-bold text-white mb-1 truncate">${file.name.replace('.html', '')}</h3>
                            <p class="text-slate-500 text-xs font-mono mb-4 italic">${file.name}</p>
                            <div class="flex gap-3">
                                <a href="${liveUrl}" target="_blank" class="flex-1 text-center bg-slate-700 hover:bg-slate-600 text-white text-xs py-2 rounded font-semibold transition">LIVE VIEW</a>
                                <a href="${githubUrl}" target="_blank" class="flex-1 text-center bg-slate-900 hover:bg-slate-800 text-slate-400 text-xs py-2 rounded font-semibold border border-slate-700 transition">CODE</a>
                            </div>
                        </div>
                    `;
                    grid.appendChild(card);
                });

            } catch (error) {
                loader.classList.add('hidden');
                grid.innerHTML = `<p class="col-span-full text-center text-red-400">Error connecting to GitHub. Check your repository visibility.</p>`;
            }
        }

        // Initial load
        fetchFiles();
    </script>
</body>
</html>